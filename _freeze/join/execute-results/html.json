{
  "hash": "da2d967d37cf06736beb031691019a39",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Join the Community\"\nformat: html\nexecute:\n  shiny: true\n---\n\n\n\n\n\n# Join the Kenyan Community in Scotland\n\n::: {.cell}\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(shiny)\nlibrary(blastula)\nlibrary(glue)\n\n# UI components\ntextInput(\"name\", \"Full Name:\", placeholder = \"Enter your full name\")\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"form-group shiny-input-container\">\n<label class=\"control-label\" id=\"name-label\" for=\"name\">Full Name:</label>\n<input id=\"name\" type=\"text\" class=\"shiny-input-text form-control\" value=\"\" placeholder=\"Enter your full name\"/>\n</div>\n```\n\n:::\n\n```{.r .cell-code}\ntextInput(\"email\", \"Email Address:\", placeholder = \"Enter your email address\")\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"form-group shiny-input-container\">\n<label class=\"control-label\" id=\"email-label\" for=\"email\">Email Address:</label>\n<input id=\"email\" type=\"text\" class=\"shiny-input-text form-control\" value=\"\" placeholder=\"Enter your email address\"/>\n</div>\n```\n\n:::\n\n```{.r .cell-code}\nselectInput(\"interest\", \"Area of Interest:\", choices = c(\"Networking\", \"Volunteering\", \"Events\", \"Sponsorship\"))\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"form-group shiny-input-container\">\n<label class=\"control-label\" id=\"interest-label\" for=\"interest\">Area of Interest:</label>\n<div>\n<select id=\"interest\" class=\"shiny-input-select\"><option value=\"Networking\" selected>Networking</option>\n<option value=\"Volunteering\">Volunteering</option>\n<option value=\"Events\">Events</option>\n<option value=\"Sponsorship\">Sponsorship</option></select>\n<script type=\"application/json\" data-for=\"interest\" data-nonempty=\"\">{\"plugins\":[\"selectize-plugin-a11y\"]}</script>\n</div>\n</div>\n```\n\n:::\n\n```{.r .cell-code}\nactionButton(\"submit\", \"Submit\")\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<button id=\"submit\" type=\"button\" class=\"btn btn-default action-button\">Submit</button>\n```\n\n:::\n\n```{.r .cell-code}\ntextOutput(\"confirmation\")\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"confirmation\" class=\"shiny-text-output\"></div>\n```\n\n:::\n\n```{.r .cell-code}\n# Server-side logic\nobserveEvent(input$submit, {\n  \n  # Save data\n  entry <- data.frame(\n    name = input$name,\n    email = input$email,\n    interest = input$interest,\n    timestamp = Sys.time()\n  )\n  \n  if (!file.exists(\"community_signups.csv\")) {\n    write.csv(entry, \"community_signups.csv\", row.names = FALSE)\n  } else {\n    write.table(entry, \"community_signups.csv\", append = TRUE, sep = \",\", col.names = FALSE, row.names = FALSE)\n  }\n  \n  # Compose and send welcome email\n  email <- compose_email(\n    body = md(glue(\n      \"Hello {input$name},\\n\\n\",\n      \"Thank you for joining the Kenyan Community in Scotland! ðŸŽ‰\\n\\n\",\n      \"We are excited to have you onboard.\\n\\n\",\n      \"Stay tuned for upcoming events and activities!\\n\\n\",\n      \"**Your selected area of interest:** {input$interest}\\n\\n\",\n      \"Warm regards,\\n\\n\",\n      \"Kenyan Community in Scotland Team\"\n    ))\n  )\n  \n  smtp_send(\n    email,\n    from = \"your-email@gmail.com\",\n    to = input$email,\n    subject = \"Welcome to the Kenyan Community in Scotland!\",\n    credentials = creds_key(id = \"gmail\")\n  )\n  \n  # Confirmation message\n  output$confirmation <- renderText({\n    paste(\"Thank you,\", input$name, \"for joining! Please check your email. ðŸ“§\")\n  })\n})\n```\n:::\n\n\n\n\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"site_libs/selectize-0.15.2/css/selectize.bootstrap3.css\" rel=\"stylesheet\" />\n<script src=\"site_libs/selectize-0.15.2/js/selectize.min.js\"></script>\n<script src=\"site_libs/selectize-0.15.2/accessibility/js/selectize-plugin-a11y.min.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}